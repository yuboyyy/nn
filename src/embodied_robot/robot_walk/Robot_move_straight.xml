<!-- 拟人化双腿双臂机器人模型（修复直立问题） -->
<mujoco model="Humanoid_Robot">
  <!-- 仿真环境参数：保持步长稳定性，添加皮肤摩擦避免打滑 -->
  <option timestep="0.01" gravity="0 0 -9.81" integrator="RK4"/>

  <default>
    <geom rgba="0.8 0.8 0.8 1"/>
    <joint type="hinge" limited="true" damping="0.3"/> <!-- 增大阻尼，减少倾倒震荡 -->
  </default>

  <!-- 资源定义：材质区分不同身体部位 -->
  <asset>
    <material name="torso_red" rgba="0.9 0.2 0.2 1"/>    <!-- 躯干红色 -->
    <material name="limb_blue" rgba="0.2 0.3 0.9 1"/>    <!-- 四肢蓝色 -->
    <material name="joint_gray" rgba="0.5 0.5 0.5 1"/>   <!-- 关节灰色 -->
    <material name="foot_green" rgba="0.2 0.8 0.2 1"/>   <!-- 脚部绿色 -->
    <material name="hand_yellow" rgba="0.9 0.7 0.1 1"/>  <!-- 手部黄色 -->
  </asset>

  <!-- 世界实体 -->
  <worldbody>
    <!-- 地面：添加摩擦系数，防止机器人打滑 -->
    <body name="ground">
      <geom type="plane" size="15 15 0.1" rgba="0.3 0.3 0.3 1" friction="2.0 0.2 0.2"/>
    </body>

    <!-- 机器人躯干（核心主体）：调整初始高度，确保重心在双脚正上方 -->
    <body name="torso" pos="0 0 1.2">
      <inertial pos="0 0 -0.1" mass="3.0" diaginertia="0.6 0.6 0.4"/> <!-- 重心略微下移，增强稳定性 -->
      <geom type="box" size="0.3 0.2 0.4" material="torso_red"/> <!-- 长方体躯干 -->

      <!-- 颈部关节（连接头部）：初始角度为0，保持直立 -->
      <body name="neck" pos="0 0 0.4">
        <joint name="neck_joint" axis="0 1 0" range="-0.3 0.3" pos="0 0 0"/>
        <geom type="sphere" size="0.15" material="joint_gray"/> <!-- 球形头部 -->
        <inertial pos="0 0 0" mass="0.5" diaginertia="0.05 0.05 0.05"/>
      </body>

      <!-- =================== 左臂结构（初始弯曲，避免下垂） =================== -->
      <body name="left_shoulder" pos="0.3 0 0.1">
        <joint name="left_shoulder_joint" axis="0 1 0" range="-0.5 0.8" pos="0 0 0" ref="0.2"/> <!-- ref=0.2：初始向前抬 -->
        <geom type="sphere" size="0.1" material="joint_gray"/> <!-- 肩关节球 -->

        <!-- 左上臂：初始位置调整，避免碰撞躯干 -->
        <body name="left_upper_arm" pos="0 0 0">
          <joint name="left_elbow_joint" axis="0 1 0" range="-1.5 0.2" pos="0 0 0.3" ref="-0.5"/> <!-- ref=-0.5：初始弯曲 -->
          <geom type="capsule" size="0.07 0.15" fromto="0 0 0 0 0 0.3" material="limb_blue"/>
          <inertial pos="0 0 0.15" mass="0.6" diaginertia="0.1 0.1 0.1"/> <!-- 减轻手臂质量，减少倾倒力矩 -->

          <!-- 左前臂：初始弯曲，避免下垂 -->
          <body name="left_forearm" pos="0 0 0.3">
            <joint name="left_wrist_joint" axis="0 1 0" range="-1.0 1.0" pos="0 0 0.25" ref="0.0"/>
            <geom type="capsule" size="0.06 0.125" fromto="0 0 0 0 0 0.25" material="limb_blue"/>
            <inertial pos="0 0 0.125" mass="0.4" diaginertia="0.05 0.05 0.05"/>

            <!-- 左手：初始位置抬升，避免落地 -->
            <body name="left_hand" pos="0 0 0.25">
              <geom type="box" size="0.09 0.07 0.05" material="hand_yellow"/>
              <inertial pos="0 0 0" mass="0.15" diaginertia="0.02 0.02 0.02"/>
            </body>
          </body>
        </body>
      </body>

      <!-- =================== 右臂结构（与左臂对称，保持平衡） =================== -->
      <body name="right_shoulder" pos="-0.3 0 0.1">
        <joint name="right_shoulder_joint" axis="0 1 0" range="-0.8 0.5" pos="0 0 0" ref="-0.2"/> <!-- ref=-0.2：初始向前抬（对称） -->
        <geom type="sphere" size="0.1" material="joint_gray"/> <!-- 肩关节球 -->

        <!-- 右上臂：初始位置对称 -->
        <body name="right_upper_arm" pos="0 0 0">
          <joint name="right_elbow_joint" axis="0 1 0" range="-1.5 0.2" pos="0 0 0.3" ref="-0.5"/> <!-- 对称弯曲 -->
          <geom type="capsule" size="0.07 0.15" fromto="0 0 0 0 0 0.3" material="limb_blue"/>
          <inertial pos="0 0 0.15" mass="0.6" diaginertia="0.1 0.1 0.1"/>

          <!-- 右前臂：初始弯曲（对称） -->
          <body name="right_forearm" pos="0 0 0.3">
            <joint name="right_wrist_joint" axis="0 1 0" range="-1.0 1.0" pos="0 0 0.25" ref="0.0"/>
            <geom type="capsule" size="0.06 0.125" fromto="0 0 0 0 0 0.25" material="limb_blue"/>
            <inertial pos="0 0 0.125" mass="0.4" diaginertia="0.05 0.05 0.05"/>

            <!-- 右手：初始位置抬升（对称） -->
            <body name="right_hand" pos="0 0 0.25">
              <geom type="box" size="0.09 0.07 0.05" material="hand_yellow"/>
              <inertial pos="0 0 0" mass="0.15" diaginertia="0.02 0.02 0.02"/>
            </body>
          </body>
        </body>
      </body>

      <!-- =================== 左腿结构（初始微屈，支撑身体） =================== -->
      <body name="left_hip" pos="0.15 0 -0.3">
        <joint name="left_hip_joint" axis="0 1 0" range="-0.4 0.6" pos="0 0 0" ref="0.1"/> <!-- ref=0.1：初始微抬，避免后倒 -->
        <geom type="sphere" size="0.12" material="joint_gray"/> <!-- 髋关节球 -->

        <!-- 左大腿：初始位置调整，确保小腿垂直 -->
        <body name="left_thigh" pos="0 0 0">
          <joint name="left_knee_joint" axis="0 1 0" range="-1.2 0.1" pos="0 0 -0.4" ref="-0.2"/> <!-- ref=-0.2：膝盖微屈，增强稳定 -->
          <geom type="capsule" size="0.09 0.2" fromto="0 0 0 0 0 -0.4" material="limb_blue"/>
          <inertial pos="0 0 -0.2" mass="1.0" diaginertia="0.2 0.2 0.2"/> <!-- 减轻腿部质量，降低重心 -->

          <!-- 左小腿：初始垂直，脚掌落地 -->
          <body name="left_calf" pos="0 0 -0.4">
            <joint name="left_ankle_joint" axis="0 1 0" range="-0.3 0.3" pos="0 0 -0.35" ref="0.0"/>
            <geom type="capsule" size="0.08 0.175" fromto="0 0 0 0 0 -0.35" material="limb_blue"/>
            <inertial pos="0 0 -0.175" mass="0.7" diaginertia="0.1 0.1 0.1"/>

            <!-- 左脚：初始位置紧贴地面，增大支撑面积 -->
            <body name="left_foot" pos="0 0 -0.35">
              <geom type="box" size="0.15 0.1 0.04" material="foot_green" pos="0 0 -0.02"/> <!-- 增大脚掌，增强抓地 -->
              <inertial pos="0 0 -0.02" mass="0.3" diaginertia="0.03 0.03 0.01"/>
            </body>
          </body>
        </body>
      </body>

      <!-- =================== 右腿结构（与左腿对称，保持平衡） =================== -->
      <body name="right_hip" pos="-0.15 0 -0.3">
        <joint name="right_hip_joint" axis="0 1 0" range="-0.6 0.4" pos="0 0 0" ref="-0.1"/> <!-- ref=-0.1：对称微抬 -->
        <geom type="sphere" size="0.12" material="joint_gray"/> <!-- 髋关节球 -->

        <!-- 右大腿：初始位置对称 -->
        <body name="right_thigh" pos="0 0 0">
          <joint name="right_knee_joint" axis="0 1 0" range="-1.2 0.1" pos="0 0 -0.4" ref="-0.2"/> <!-- 对称微屈 -->
          <geom type="capsule" size="0.09 0.2" fromto="0 0 0 0 0 -0.4" material="limb_blue"/>
          <inertial pos="0 0 -0.2" mass="1.0" diaginertia="0.2 0.2 0.2"/>

          <!-- 右小腿：初始垂直（对称） -->
          <body name="right_calf" pos="0 0 -0.4">
            <joint name="right_ankle_joint" axis="0 1 0" range="-0.3 0.3" pos="0 0 -0.35" ref="0.0"/>
            <geom type="capsule" size="0.08 0.175" fromto="0 0 0 0 0 -0.35" material="limb_blue"/>
            <inertial pos="0 0 -0.175" mass="0.7" diaginertia="0.1 0.1 0.1"/>

            <!-- 右脚：初始位置紧贴地面（对称） -->
            <body name="right_foot" pos="0 0 -0.35">
              <geom type="box" size="0.15 0.1 0.04" material="foot_green" pos="0 0 -0.02"/>
              <inertial pos="0 0 -0.02" mass="0.3" diaginertia="0.03 0.03 0.01"/>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <!-- 执行器：为每个活动关节配置电机，扭矩适配肢体质量 -->
  <actuator>
    <!-- 腿部电机：扭矩适度降低，避免动作过猛导致倾倒 -->
    <motor name="left_hip_motor" joint="left_hip_joint" gear="12" ctrllimited="true" ctrlrange="0 1.0"/>
    <motor name="left_knee_motor" joint="left_knee_joint" gear="10" ctrllimited="true" ctrlrange="0 1.0"/>
    <motor name="left_ankle_motor" joint="left_ankle_joint" gear="6" ctrllimited="true" ctrlrange="0 1.0"/>
    <motor name="right_hip_motor" joint="right_hip_joint" gear="12" ctrllimited="true" ctrlrange="0 1.0"/>
    <motor name="right_knee_motor" joint="right_knee_joint" gear="10" ctrllimited="true" ctrlrange="0 1.0"/>
    <motor name="right_ankle_motor" joint="right_ankle_joint" gear="6" ctrllimited="true" ctrlrange="0 1.0"/>

    <!-- 手臂电机：扭矩降低，避免摆动时影响身体平衡 -->
    <motor name="left_shoulder_motor" joint="left_shoulder_joint" gear="8" ctrllimited="true" ctrlrange="0 1.0"/>
    <motor name="left_elbow_motor" joint="left_elbow_joint" gear="6" ctrllimited="true" ctrlrange="0 1.0"/>
    <motor name="left_wrist_motor" joint="left_wrist_joint" gear="4" ctrllimited="true" ctrlrange="0 1.0"/>
    <motor name="right_shoulder_motor" joint="right_shoulder_joint" gear="8" ctrllimited="true" ctrlrange="0 1.0"/>
    <motor name="right_elbow_motor" joint="right_elbow_joint" gear="6" ctrllimited="true" ctrlrange="0 1.0"/>
    <motor name="right_wrist_motor" joint="right_wrist_joint" gear="4" ctrllimited="true" ctrlrange="0 1.0"/>

    <!-- 颈部电机：扭矩最小，仅用于微调 -->
    <motor name="neck_motor" joint="neck_joint" gear="3" ctrllimited="true" ctrlrange="0 1.0"/>
  </actuator>
</mujoco>